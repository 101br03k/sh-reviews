<!DOCTYPE html>
<html>
<head>
  <title>Reviews</title>
  <link rel="stylesheet" href="/style.css">
  <script>
    function confirmDelete(form) {
      if (confirm('Are you sure you want to delete this review?')) {
        form.submit();
      }
      return false;
    }
  </script>
</head>
<body>
  <div class="container">
    <h1>Reviews</h1>
    <% if (error) { %>
      <div style="color: red;"><%= error %></div>
    <% } %>
    <div style="text-align: center; margin-bottom: 2em;">
      <a href="/submit" style="text-decoration: none;">
        <button type="button">Add New Review</button>
      </a>
    </div>
              <!-- In src/views/index.ejs -->
              <% reviews.forEach(review => { %>
                <div class="review">
                  <div class="review-header">
                    <span class="username"><%= review.username %></span>
                    <span class="date"><%= new Date(review.created_at).toLocaleString() %></span>
                    &nbsp <a href="/edit/<%= review.id %>">Edit</a> <!-- Edit link -->
                    
                  </div>
                  <div class="review-content">
                    <div class="text"><%= review.review %></div>
                    <% if (review.image) { %>
                      <img src="<%= review.image %>" alt="Review Image">
                    <% } %>
                  </div>
                  <div class="rating">Rating: 
                    <% for (let i = 0; i < review.rating; i++) { %>
                      <span class="star">★</span>
                    <% } %>
                    <% for (let i = review.rating; i < 5; i++) { %>
                      <span class="star">☆</span>
                    <% } %>
                    <form action="/delete/<%= review.id %>" method="POST" style="display:inline;">
                      <button class="delete" type="submit" onclick="return confirm('Are you sure you want to delete this review?');">Delete</button>
                    </form>
                  </div>
                </div>
              <% }) %>
  </div>
</body>
</html>